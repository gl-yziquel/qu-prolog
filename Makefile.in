#
# Main makefile
#
# Please note that the order in which the targets are evaluated
# is important. Don't be tempted to reorder or parallelise
# the makefiles!
#
# Richard Hagen
#

#
# Nothing else should need attention, but there are some things that
# are interesting later on, particularly the rules for making Qu-Prolog
# objects.
#

export QPBIN	= @QPHOME@/bin


export QC		= qc -Z
export QCFLAGS		= -DQuAM
export COMPILE.qc	= $(QPBIN)/$(QC) $(QCFLAGS)

export PROLOG		= prolog



.PHONY: all
all:	objects

#export	PARALLEL	= -j 2

.PHONY: objects
objects:
	@$(MAKE) -C @QPHOME@/bin	$(PARALLEL) all 
	@$(MAKE) -C @QPHOME@/src	$(PARALLEL) all
	@$(MAKE) -C @QPHOME@/src	$(PARALLEL) install
	@$(MAKE) -C @QPHOME@/prolog	$(PARALLEL) all


